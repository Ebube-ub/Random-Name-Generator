<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secret Santa</title>
    <link rel="stylesheet" href="random.css">
</head>
<body>

<!-- ADD PAGE -->
<div id="addPage">
  <div class="add-container">
    <h2>Add Names</h2>
    <input type="text" id="newName" placeholder="Enter a name">
    <button id="confirmAdd">Add Name</button><br>
    <button id="startBtn">Randomize</button>
  </div>
  <div class="names">
    <h3>Names Added</h3>
    <ul id="addNamesList"></ul>
</div>
    
</div>

<!-- GENERATE PAGE -->
<div id="generatePage" style="display:none;">
    <div style="display:flex; flex-direction:row; width:100%;">
        <!-- LEFT SIDE -->
        <div>
            <div id="santa"><p></p></div>
            <button id="button">Generate</button><br>
            <button id="goAddPage">Add a Name</button><br>
            <input type="reset" value="Reset" onclick="location.reload()">
        </div>

        <!-- RIGHT SIDE -->
        <div class="right">
            <h3>Generated Names</h3>
            <table id="generatedTable">
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div id="bottomTextContainer">
        <h5>Created by Godswill Ubani</h5>
        <h6>i4nnova Intern</h6>
    </div>
</div>

<script>
const names = [];
const usedNumbers = new Set();

const addPage = document.getElementById("addPage");
const generatePage = document.getElementById("generatePage");

const newNameInput = document.getElementById("newName");
const confirmAdd = document.getElementById("confirmAdd");
const startBtn = document.getElementById("startBtn");

const goAddPage = document.getElementById("goAddPage");
const santa = document.getElementById("santa");
const button = document.getElementById("button");

const addNamesList = document.getElementById("addNamesList");
const generatedTableBody = document.querySelector("#generatedTable tbody");

confirmAdd.addEventListener("click", () => {
    const newName = newNameInput.value.trim();
    if (!newName) return;

    names.push(newName);
    newNameInput.value = "";

    // Update bullet list
    addNamesList.innerHTML = "";
    names.forEach(name => {
        const li = document.createElement("li");
        li.textContent = name;
        addNamesList.appendChild(li);
    });

    if (names.length > 0) startBtn.style.display = "inline-block";
});


/* START GENERATING */
startBtn.addEventListener("click", () => {
    addPage.style.display = "none";
    generatePage.style.display = "flex";
    document.querySelector(".right").style.display = "block";
});

/* GO BACK TO ADD PAGE */
goAddPage.addEventListener("click", () => {
    generatePage.style.display = "none";
    addPage.style.display = "flex";
    document.querySelector(".right").style.display = "none";
});

/* GENERATE RANDOM NAME */
button.addEventListener("click", () => {
    if (usedNumbers.size >= names.length) {
        santa.innerHTML = "<p>Done!!</p>";
        return;
    }

    let randomIndex;
    do {
        randomIndex = Math.floor(Math.random() * names.length);
    } while (usedNumbers.has(randomIndex));

    usedNumbers.add(randomIndex);
    const selectedName = names[randomIndex];
    santa.innerHTML = `<p>${selectedName}</p>`;

    // Add to table
    let lastRow = generatedTableBody.lastElementChild;
    if (!lastRow || lastRow.cells.length === 3) lastRow = generatedTableBody.insertRow();
    const cell = lastRow.insertCell();
    cell.textContent = selectedName;
});
</script>

</body>
</html>
